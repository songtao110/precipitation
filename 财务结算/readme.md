## 1.高并发下怎么做余额扣减？
```
》悲观锁：行锁，select * from xxx where for update
》乐观锁：CAS
》业务层面多账户：提高并行度
》记录持久化，实时余额内存化，或者redis化，异步任务方式汇总
》广告业务，操作很频繁，可以合并处理，降低数据库更新频次
》限流
》Mq缓冲，达到系统可接受的一定的并发能力
》子账户拆分，子账户和总账户在一张表内（可以使用商户ID做分库分表路由），根据业务ID（比如订单号）hash路由到哪个子账户，进行扣款或者充值。

```

## 2.结算设计
[在财务系统中，结算系统的组成模块是哪些](http://www.360doc.com/content/19/0710/17/28402669_847892937.shtml)

[支付账务清结算系统设计干货](https://zhuanlan.zhihu.com/p/60574672)

[电商财务结算系统重构实践](https://blog.csdn.net/vipshop_fin_dev/article/details/79761081)
